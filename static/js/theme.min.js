function opening() {
    var element;
    document.querySelector(".openingx").classList.remove("openingx");
    var btn = document.getElementById("float-btn");
    btn.classList.remove("d-none");
    btn.classList.add("d-flex");
}

(() => {
    var e, n, t, o, l, a, i, s;
    var d = document.getElementById("invitationStart");
    var r = document.documentElement.lang;
    var c = document.getElementById("loader");

    // Hide loader on window load
    if (c) {
        window.onload = c.style.display = "none";
    }

    // Initialize Splide sliders
    var u = new Splide("#invitationStart", {
        type: "fade",
        direction: "ttb",
        height: "100%",
        wheel: true,
        arrows: false,
        pagination: false,
        updateOnMove: true,
        drag: false,
        noDrag: "input, textarea, .rsvp-placeholder"
    });

    var m = new Splide("#menuSlider", {
        fixedWidth: "25%",
        fixedHeight: 70,
        focus: "center",
        arrows: false,
        rewind: true,
        pagination: false,
        cover: false,
        updateOnMove: true,
        isNavigation: true
    });

    u.mount();


    // Open invitation and synchronize sliders
    var x = function(e) {
        openInvitation();
        if (document.querySelector(".no-menu") === null) {
            m.mount();
            u.sync(m);
            m.go(1);
        } else {
            u.go(1);
        }
        d.classList.remove("not-open");
        e.target.style.display = "none";
        u.Components.Drag.disable(false);
    };

    var E = document.getElementsByClassName("btn-open-invitation");
    for (var L = 0; L < E.length; L++) {
        E[L].addEventListener("click", x, false);
    }

    // Show gift containers
    showGift = function(e) {
        for (var n = 0; n < T.length; n++) {
            n != e && (M[n].style.display = "none");
        }
        M[e].style.display = "inherit";
    };

    var M = document.getElementsByClassName("gift-container");
    for (var B = 0; B < M.length; B++) {
        M[B].style.display = "none";
    }

    var T = document.getElementsByClassName("btn-gift");
    var I = function(e) {
        T[e].onclick = function() { showGift(e); };
    };
    for (var S = 0; S < T.length; S++) {
        I(S);
    }

    // Lightbox functionality
    var C = document.getElementById("lightboxWrapper");
    var H = document.getElementById("lightboxCloseBtn");
    var k = document.getElementById("lightboxNextBtn");
    var q = document.getElementById("lightboxPrevBtn");
    var N = document.querySelector("#lightboxWrapper > .lightbox-list");
    var _ = document.getElementsByClassName("lightbox");

    showLightbox = function(e) {
        C.classList.add("show");
        N.innerHTML = '<div class="lightbox-inner"><img src="' + _[e].src + '"></div>';
        k.dataset.index = e;
        q.dataset.index = e;
    };

    k.onclick = function() {
        var e = parseInt(k.dataset.index) + 1;
        e >= _.length && (e = 0);
        showLightbox(e);
    };

    q.onclick = function() {
        var e = parseInt(q.dataset.index) - 1;
        e == -1 && (e = _.length - 1);
        showLightbox(e);
    };

    closeLightbox = function() {
        C.classList.remove("show");
        N.innerHTML = "";
    };

    var F = function(e) {
        _[e].onclick = function() { showLightbox(e); };
    };
    for (var D = 0; D < _.length; D++) {
        F(D);
    }
    H.onclick = function() { closeLightbox(); };

    // Modal functionality
    var R = document.getElementsByTagName("BODY")[0];
    var W = document.getElementById("modalOverlay");

    showModal = function(e) {
        R.classList.add("modal-open");
        W.classList.add("show");
        W.style = "display: block;";
        e.classList.add("show");
        e.style = "display: block;";
    };

    closeModal = function(e) {
        R.classList.remove("modal-open");
        W.classList.remove("show");
        W.style = "display: none;";
        e.classList.remove("show");
        e.style = "display: none;";
    };

    // RSVP functionality
    var j = document.getElementsByClassName("btn-rsvp");
    var G = (e = document.querySelector(".rsvp-placeholder")) !== null && e !== undefined ? e : null;
    var U = (n = document.querySelector(".rsvp-form")) !== null && n !== undefined ? n : null;

    for (var Y = 0; Y < j.length; Y++) {
        if (G) {
            j[Y].style.display = "none";
        } else {
            j[Y].onclick = function() { showModal(rsvpModal); };
        }
    }

    if (U && G) {
        G.innerHTML = "";
        G.appendChild(U);
    }

    // Copy to clipboard functionality
    var X = document.getElementsByClassName("account-number");

    for (var Z = 0; Z < X.length; Z++) {
        if (X[Z].innerHTML) {
            if (r == "id") {
                X[Z].insertAdjacentHTML("afterend", "<button type='button' class='btn btn-sm btn-primary mt-2 mb-2 animate__animated animate__fadeInUp animate__slow delay-5' data-text='" + X[Z].innerText + "' onclick='copyText(event)' style='font-family: sans-serif; border-radius: 4px'>Salin Rekening</button>");
            } else {
                X[Z].insertAdjacentHTML("afterend", "<button type='button' class='btn btn-sm btn-primary mt-2 mb-2 animate__animated animate__fadeInUp animate__slow delay-5' data-text='" + X[Z].innerText + "' onclick='copyText(event)' style='font-family: sans-serif; border-radius: 4px'>Copy Account Number</button>");
            }
        }
    }

    copyText = function(e) {
        e.preventDefault();
        var n = e.currentTarget.dataset.text;
        var t = document.createElement("input");
        t.type = "text";
        t.value = n;
        document.body.appendChild(t);
        t.select();
        document.execCommand("copy");
        document.body.removeChild(t);
        alert(r == "id" ? "Rekening telah tersalin" : "Account number has been copied");
    };

    // Link functionality
    var J = document.getElementsByClassName("link");

    var K = function(e) {
        J[e].onclick = function(n) {
            n.preventDefault();
            location.href = J[e].getAttribute("data-link");
        };
    };
    for (var Q = 0; Q < J.length; Q++) {
        K(Q);
    }

    // URL parameter handling
    var V = function(e) {
        if ("" == e) return {};
        var n = {};
        return e.slice(1).split("&").forEach((e) => {
            let [t, o] = e.split("=");
            n[t] = decodeURIComponent(o.replace(/\+/g, " "));
        }), n;
    };

    var $ = function() {
        var e = V(window.location.search);
        if ("gift" in e) {
            var n = parseInt(e.gift);
            if (n >= 0 && n < T.length) {
                showGift(n);
            }
        }
        if ("modal" in e) {
            var t = document.querySelector(".modal#" + e.modal);
            if (t) {
                showModal(t);
            }
        }
    };
    $();

})();
